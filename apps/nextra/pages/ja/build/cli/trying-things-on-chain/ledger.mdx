import { Callout, Steps } from 'nextra/components'

# Aptos CLIã§ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ãƒ¬ã‚¸ãƒ£ãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹

Ledgerã®ã‚ˆã†ãªãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã¯ã€ç§˜å¯†éµãŒãƒ‡ãƒã‚¤ã‚¹ã‹ã‚‰å‡ºã‚‹ã“ã¨ãŒãªã„ãŸã‚ã€`mainnet`ã§ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã«ç½²åã™ã‚‹æœ€ã‚‚å®‰å…¨ãªæ–¹æ³•ã§ã™ã€‚

<Callout type="warning">
`Ledger Nano S`ã¯ãƒ¡ãƒ¢ãƒªãŒé™ã‚‰ã‚Œã¦ãŠã‚Šã€Aptosã§å¤šãã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã«ç½²åã§ããªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚ãƒ‡ãƒã‚¤ã‚¹ãŒå‡¦ç†ã§ããªã„ã»ã©å¤§ããªãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã«ç½²åã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã€`Wrong raw transaction length`ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
</Callout>

## åˆæœŸè¨­å®š

Aptos CLIã¨Ledgerãƒ‡ãƒã‚¤ã‚¹ã§ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã«ç½²åã™ã‚‹ã«ã¯ã€ã„ãã¤ã‹ã®è¨­å®šæ‰‹é †ãŒå¿…è¦ã§ã™ã€‚

<Steps>

### Aptos CLIãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™
   ã¾ã ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ãªã„å ´åˆã¯ã€[ã“ã¡ã‚‰ã®æ‰‹é †](../../cli.mdx)ã«å¾“ã£ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚

### Ledgerãƒ‡ãƒã‚¤ã‚¹ã®åŸºæœ¬è¨­å®šãŒå®Œäº†ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™
   æ‰‹é †ã¯[Ledgerã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆ](https://www.ledger.com/)ã§ç¢ºèªã§ãã¾ã™ã€‚ä¾‹ãˆã°ã€[Ledger Nano X](https://support.ledger.com/hc/en-us/articles/360018784134-Set-up-your-Ledger-Nano-X?docs=true)ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †ã¯ã“ã¡ã‚‰ã§ã™ã€‚

### Ledgerãƒ‡ãƒã‚¤ã‚¹ã‚’ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã«æ¥ç¶šã—ã¾ã™

### [ã“ã®ã‚¬ã‚¤ãƒ‰](https://support.ledger.com/hc/en-us/articles/7326502672285-Aptos-APT?docs=true)ã«å¾“ã£ã¦ã€Ledgerãƒ‡ãƒã‚¤ã‚¹ã«Aptosã‚¢ãƒ—ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™

### Ledgerãƒ‡ãƒã‚¤ã‚¹ã®ãƒ­ãƒƒã‚¯ã‚’è§£é™¤ã—ã€Aptosã‚¢ãƒ—ãƒªã‚’é–‹ãã¾ã™

   <Callout type="info" emoji="â„¹ï¸">
   Ledgerã‚’ä½¿ç”¨ã—ã¦ç½²åã™ã‚‹éš›ã¯ã€CLIã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹å‰ã«ã€ãƒ‡ãƒã‚¤ã‚¹ã‚’æ¥ç¶šã—ã€ãƒ­ãƒƒã‚¯ã‚’è§£é™¤ã—ã€Aptosã‚¢ãƒ—ãƒªã‚’é–‹ãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
   </Callout>

### Aptos CLIã§æ–°ã—ã„Ledgerãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’ä½œæˆã—ã¾ã™

   ```bash filename="Terminal"
   aptos init --profile <ã‚ãªãŸã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«> --ledger
   ```

   ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«å¾“ã£ã¦ãã ã•ã„ï¼š

   ```text filename="Terminal"
   Configuring for profile <your-profile>
   Choose network from [devnet, testnet, mainnet, local, custom | defaults to devnet]

   No network given, using devnet...
   Please choose an index from the following 5 ledger accounts, or choose an arbitrary index that you want to use:
   [0] Derivation path: m/44'/637'/0'/0'/0' (Address: 59836ba1dd0c845713bdab34346688d6f1dba290dbf677929f2fc20593ba0cfb)
   [1] Derivation path: m/44'/637'/1'/0'/0' (Address: 21563230cf6d69ee72a51d21920430d844ee48235e708edbafbc69708075a86e)
   [2] Derivation path: m/44'/637'/2'/0'/0' (Address: 667446181b3b980ef29f5145a7a2cc34d433fc3ee8c97fc044fd978435f2cb8d)
   [3] Derivation path: m/44'/637'/3'/0'/0' (Address: 2dcf037a9f31d93e202c074229a1b69ea8ee4d2f2d63323476001c65b0ec4f31)
   [4] Derivation path: m/44'/637'/4'/0'/0' (Address: 23c579a9bdde1a59f1c9d36d8d379aeefe7a5997b5b58bd5a5b0c12a4f170431)

   0
   Account 59836ba1dd0c845713bdab34346688d6f1dba290dbf677929f2fc20593ba0cfb has been already found on-chain

   ---
   Aptos CLI is now set up for account 59836ba1dd0c845713bdab34346688d6f1dba290dbf677929f2fc20593ba0cfb as profile <your-profile>!  Run `aptos --help` for more information about commands
   {
     "Result": "Success"
   }
   ```

   ã“ã®ä¾‹ã§ã¯ã€`aptos init`ã‚³ãƒãƒ³ãƒ‰ã®å¾Œã«`0`ã‚’å…¥åŠ›ã—ã¦æœ€åˆã®Ledgerã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’é¸æŠã—ã¦ã„ã¾ã™ã€‚ãŠå¥½ã¿ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’é¸æŠã§ãã¾ã™ã€‚

   **ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ï¼š**

   1. `Device Not Found`ã‚¨ãƒ©ãƒ¼ãŒè¡¨ç¤ºã•ã‚ŒãŸå ´åˆã¯ã€Ledgerã®ãƒ­ãƒƒã‚¯ã‚’è§£é™¤ã—ã¦ã‹ã‚‰ã“ã®æ‰‹é †ã‚’ã‚„ã‚Šç›´ã—ã¦ãã ã•ã„ã€‚
   2. `Aptos ledger app is not opened`ã‚¨ãƒ©ãƒ¼ãŒè¡¨ç¤ºã•ã‚ŒãŸå ´åˆã¯ã€Ledgerã§Aptosã‚¢ãƒ—ãƒªã‚’é–‹ã„ã¦ã‹ã‚‰ã“ã®æ‰‹é †ã‚’ã‚„ã‚Šç›´ã—ã¦ãã ã•ã„ã€‚

### æœ€å¾Œã«ã€[ã“ã‚Œã‚‰ã®æ‰‹é †](https://medium.com/@DavidLehman24/how-to-enable-disable-blind-signing-on-ledger-wallet-99113a85cdad)ã«å¾“ã£ã¦ã€Ledgerãƒ‡ãƒã‚¤ã‚¹ã§ãƒ–ãƒ©ã‚¤ãƒ³ãƒ‰ç½²åã‚’æœ‰åŠ¹ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™
   1. ãƒ–ãƒ©ã‚¤ãƒ³ãƒ‰ç½²åã«ã‚ˆã‚Šã€äººé–“ãŒèª­ã‚ã‚‹è¨€èªã§æ¤œè¨¼ã§ããªã„ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®æ“ä½œã‚’ç¢ºèªã§ãã¾ã™ã€‚
   2. ã“ã‚Œã¯ã€ä¸€éƒ¨ã®ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ãŒå¤§ãã™ãã¦è¡¨ç¤ºã§ããªã„ãŸã‚ã€åˆ¶é™ãªããƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã«å¿…è¦ã§ã™ã€‚
</Steps>

## Ledgerã‚’ä½¿ç”¨ã—ãŸç½²å

åˆæœŸè¨­å®šãŒå®Œäº†ã—ãŸã‚‰ã€ä»¥ä¸‹ã®æ‰‹é †ã§ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã«ç½²åã§ãã¾ã™ï¼š

1. Ledgerã‚’æ¥ç¶šã—ã¾ã™ã€‚
2. ãƒ­ãƒƒã‚¯ã‚’è§£é™¤ã—ã¾ã™ã€‚
3. Aptosã‚¢ãƒ—ãƒªã‚’é–‹ãã¾ã™ã€‚
4. ç½²åãŒå¿…è¦ãªAptos CLIã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

<Callout type="info" emoji="â„¹ï¸">
ã“ã®ãƒ—ãƒ­ã‚»ã‚¹ã¯ã€ã‚³ã‚¤ãƒ³ã®é€é‡‘ã€Moveã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®å…¬é–‹ã€ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã¨ã®å¯¾è©±ãªã©ã€ç½²åãŒå¿…è¦ãªã™ã¹ã¦ã®ã‚³ãƒãƒ³ãƒ‰ã§æ©Ÿèƒ½ã—ã¾ã™ã€‚
</Callout>

ä¾‹ãˆã°ã€`[hello_blockchain](https://github.com/aptos-labs/aptos-core/tree/main/aptos-move/move-examples/hello_blockchain)`ãƒ‡ãƒ¢ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ã‚ˆã†ãªMoveãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å…¬é–‹ã—ãŸã„å ´åˆã¯ã€ä¸Šè¨˜ã®æ‰‹é †ã«å¾“ã£ã¦ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¾ã™ï¼š

```bash filename="Terminal"
aptos move publish --profile <ã‚ãªãŸã®Ledgerãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å> --named-addresses hello_blockchain=<ã‚ãªãŸã®Ledgerãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å>
```

ä»¥ä¸‹ã®ã‚ˆã†ãªå¿œç­”ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¯ãšã§ã™ï¼š

```bash filename="Terminal"
Compiling, may take a little while to download git dependencies...
INCLUDING DEPENDENCY AptosFramework
INCLUDING DEPENDENCY AptosStdlib
INCLUDING DEPENDENCY MoveStdlib
BUILDING Examples
package size 1755 bytes
Do you want to submit a transaction for a range of [139600 - 209400] Octas at a gas unit price of 100 Octas? [yes/no] >

yes

{
  "Result": {
    "transaction_hash": "0xd5a12594f85284cfd5518d547d084030b178ee926fa3d8cbf699cc0596eff538",
    "gas_used": 1396,
    "gas_unit_price": 100,
    "sender": "59836ba1dd0c845713bdab34346688d6f1dba290dbf677929f2fc20593ba0cfb",
    "sequence_number": 0,
    "success": true,
    "timestamp_us": 1689887104333038,
    "version": 126445,
    "vm_status": "Executed successfully"
  }
}
```

ã“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å…¬é–‹ã‚’æ‰¿èªã™ã‚‹ã¨ã€Ledgerãƒ‡ãƒã‚¤ã‚¹ã§ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã«ç½²åã™ã‚‹ã‚ˆã†æ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚ç½²åå¾Œã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«å…¬é–‹ã•ã‚Œã¾ã™ï¼

ç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã®1ã¤ã¯`Error: Wrong raw transaction length`ã§ã™ã€‚ã“ã‚Œã¯ã€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã¾ãŸã¯ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚µã‚¤ã‚ºãŒãƒ‡ãƒã‚¤ã‚¹ã§ç½²åã§ãã‚‹å¤§ãã•ã‚’è¶…ãˆã¦ã„ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚ç¾åœ¨ã€Aptos Ledgerã‚¢ãƒ—ãƒªã¯20kbæœªæº€ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®ã¿ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚`Ledger Nano S`ãƒ‡ãƒã‚¤ã‚¹ã¯ãƒ¡ãƒ¢ãƒªãŒå°‘ãªã„ãŸã‚ã€ã“ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒé«˜ããªã‚Šã¾ã™ã€‚

## èªè¨¼ã‚­ãƒ¼ã®ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³

ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã§ä¿è­·ã•ã‚Œã¦ã„ãªã„ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒã‚ã‚‹å ´åˆã€
ãã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®èªè¨¼ã‚­ãƒ¼ã‚’Ledgerã®[BIP44ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹]ã«å¯¾å¿œã™ã‚‹
ç§˜å¯†éµã«åˆã‚ã›ã¦ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã‚ã‚‹ã„ã¯ã€å¤§ããªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å…¬é–‹ã—ãŸã„å ´åˆã«ã€ãƒ¡ãƒ¢ãƒªã®å•é¡Œã‚’é¿ã‘ã‚‹ãŸã‚ã«
ä¸€æ™‚çš„ã«ãƒ›ãƒƒãƒˆã‚­ãƒ¼ã«èªè¨¼ã‚­ãƒ¼ã‚’ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã¯ã€ä¸¡æ–¹ã®ã‚·ãƒŠãƒªã‚ªã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚

<Callout type="warning" emoji="â—">
ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’å§‹ã‚ã‚‹å‰ã«ã€[ã‚­ãƒ¼ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰](../../guides/key-rotation.mdx)ã‚’
å®Œäº†ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚
</Callout>

<Steps>

### ã‚­ãƒ¼ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰ã‚’å®Œäº†ã™ã‚‹

[ã‚­ãƒ¼ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰](../../guides/key-rotation.mdx)ã‚’å®Œäº†ã—ãŸã“ã¨ã‚’
ç¢ºèªã—ã¦ãã ã•ã„ã€‚

### Ledgerã®æº–å‚™ãŒã§ãã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹

1. Ledgerã‚’æ¥ç¶šã—ã¦ãƒ­ãƒƒã‚¯ã‚’è§£é™¤ã—ã¾ã™ã€‚
1. Aptosã‚¢ãƒ—ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã—ã¾ã™ï¼š`Aptos > About > Version`
1. ãƒãƒ¼ã‚¸ãƒ§ãƒ³`0.6.9`ä»¥ä¸Šã§ãªã„å ´åˆã¯ã€Ledger Liveã‚’ä½¿ç”¨ã—ã¦æ›´æ–°ã—ã¦ãã ã•ã„ã€‚
1. ãƒ–ãƒ©ã‚¤ãƒ³ãƒ‰ç½²åã‚’æœ‰åŠ¹ã«ã—ã¾ã™ï¼š`Aptos > Settings > Enable Blind Signing`

### ãƒ­ãƒ¼ã‚«ãƒ«ãƒãƒƒãƒˆã‚’èµ·å‹•ã™ã‚‹

ãƒ­ãƒ¼ã‚«ãƒ«ãƒãƒƒãƒˆã‚’èµ·å‹•ã—ã¾ã™ï¼š

```sh filename="Terminal"
aptos node run-localnet
```

ä»¥ä¸‹ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚ŒãŸã‚‰ãƒ­ãƒ¼ã‚«ãƒ«ãƒãƒƒãƒˆã®æº–å‚™ã¯å®Œäº†ã§ã™ï¼š

```sh filename="Terminal"
Applying post startup steps...

Setup is complete, you can now use the localnet!
```

<Callout type="info" emoji="ğŸ§ ">
MacOSã¾ãŸã¯Linuxã®ãƒ‘ãƒ¯ãƒ¼ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å ´åˆã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦
ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ãƒ—ãƒ­ã‚»ã‚¹ã¨ã—ã¦æ–°ã—ã„ãƒ­ãƒ¼ã‚«ãƒ«ãƒãƒƒãƒˆã‚’èµ·å‹•ã§ãã¾ã™ï¼š

```sh filename="Terminal"
mkdir -p localnet-data
aptos node run-localnet \
    --assume-yes \
    --test-dir localnet-data \
    --force-restart &
export LOCALNET_PID=$!
```

ãã®å¾Œã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã„ã¤ã§ã‚‚ãƒ­ãƒ¼ã‚«ãƒ«ãƒãƒƒãƒˆã‚’åœæ­¢ã§ãã¾ã™ï¼š

```sh filename="Terminal"
kill $LOCALNET_PID
```
</Callout>

### ãƒ­ãƒ¼ã‚«ãƒ«ãƒãƒƒãƒˆã®ãƒ›ãƒƒãƒˆã‚¦ã‚©ãƒ¬ãƒƒãƒˆãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’è¨­å®šã™ã‚‹

ãƒãƒ‹ãƒ†ã‚£ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹`0xaaa`ã§å§‹ã¾ã‚‹èªè¨¼ã‚­ãƒ¼ã«å¯¾å¿œã™ã‚‹ç§˜å¯†éµã‚’ä½œæˆã—ã¾ã™ï¼š

```sh filename="Terminal"
aptos key generate \
    --assume-yes \
    --output-file private-key-a \
    --vanity-prefix 0xaaa
```

<details>
<summary>å‡ºåŠ›ä¾‹</summary>
```sh filename="Terminal"
{
  "Result": {
    "PublicKey Path": "private-key-a.pub",
    "PrivateKey Path": "private-key-a",
    "Account Address:": "0xaaac71af5f2a4af4ec2639a15799bf9b945afb061c8bee102b636531c1b00eb5"
  }
}
```
</details>

ç§˜å¯†éµã‚’ä½¿ç”¨ã—ã¦ãƒ­ãƒ¼ã‚«ãƒ«ãƒãƒƒãƒˆã«`hot-wallet-1`ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’åˆæœŸåŒ–ã—ã¾ã™ï¼š

```sh filename="Terminal"
aptos init \
    --assume-yes \
    --network local \
    --private-key-file private-key-a \
    --profile hot-wallet-1
```

<details>
<summary>å‡ºåŠ›ä¾‹</summary>
```sh filename="Terminal"
Configuring for profile hot-wallet-1
Configuring for network Local
Using command line argument for private key
Account 0xaaac71af5f2a4af4ec2639a15799bf9b945afb061c8bee102b636531c1b00eb5 doesn\'t exist, creating it and funding it with 100000000 Octas
Account 0xaaac71af5f2a4af4ec2639a15799bf9b945afb061c8bee102b636531c1b00eb5 funded successfully

---
Aptos CLI is now set up for account 0xaaac71af5f2a4af4ec2639a15799bf9b945afb061c8bee102b636531c1b00eb5 as profile hot-wallet-1!  Run `aptos --help` for more information about commands
{
  "Result": "Success"
}
```
</details>

### ãƒ›ãƒƒãƒˆã‚¦ã‚©ãƒ¬ãƒƒãƒˆã‚­ãƒ¼ã‚’ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹

ãƒ›ãƒƒãƒˆã‚¦ã‚©ãƒ¬ãƒƒãƒˆã®èªè¨¼ã‚­ãƒ¼ã‚’Ledgerã®[BIP44ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹]1000ã«
ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã—ã¾ã™ï¼š

```sh filename="Terminal"
aptos account rotate-key \
    --assume-yes \
    --new-derivation-index 1000 \
    --profile hot-wallet-1 \
    --save-to-profile ledger-wallet-1000
```

<Callout type="info" emoji="ğŸ§ ">
ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã¨ã—ã¦ã€ã“ã®ã‚³ãƒãƒ³ãƒ‰ã§ã¯å¤§ããªæ•°å­—ï¼ˆ1000ï¼‰ã‹ã‚‰å§‹ã¾ã‚‹
[BIP44ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹]ã‚’ä½¿ç”¨ã—ã¦ã€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒLedgerã®
ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã•ã‚ŒãŸèªè¨¼ã‚­ãƒ¼ã§ä¿è­·ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¤ºã—ã€ä»–ã®æ—¢å­˜ã®
ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¨ç«¶åˆã—ãªã„ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚

ã“ã®æ–¹æ³•ã¯ã€ä»¥ä¸‹ã«ç¤ºã™ã‚ˆã†ã«ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã®å¾©å…ƒã«å½¹ç«‹ã¡ã¾ã™ã€‚
</Callout>

CLIãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®æŒ‡ç¤ºã«å¾“ã£ã¦ãã ã•ã„ï¼š

```sh filename="Terminal"
Approve rotation proof challenge signature on your Ledger device
```

<details>
<summary>å‡ºåŠ›ä¾‹</summary>
```sh filename="Terminal"
{
  "Result": {
    "message": "Saved new profile ledger-wallet-1000",
    "transaction": {
      "transaction_hash": "0x1a6df99651ac170bda10cfb9898fa196321d80a928033791b9d2231f77738bb2",
      "gas_used": 448,
      "gas_unit_price": 100,
      "sender": "aaac71af5f2a4af4ec2639a15799bf9b945afb061c8bee102b636531c1b00eb5",
      "sequence_number": 0,
      "success": true,
      "timestamp_us": 1717986382369736,
      "version": 186,
      "vm_status": "Executed successfully"
    }
  }
}
```
</details>

`hot-wallet-1`ã¨`ledger-wallet-1000`ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’æ¯”è¼ƒã—ã€åŒã˜`account`
ã‚¢ãƒ‰ãƒ¬ã‚¹ã ãŒç•°ãªã‚‹`public_key`å€¤ã‚’æŒã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ï¼š

```sh filename="Terminal"
aptos config show-profiles --profile hot-wallet-1
aptos config show-profiles --profile ledger-wallet-1000
```

<details>
<summary>å‡ºåŠ›ä¾‹</summary>
```sh filename="Terminal"
{
  "Result": {
    "hot-wallet-1": {
      "has_private_key": true,
      "public_key": "0xffb1240fd1267207cc3ed2e1b5386e090a9ca2c844d7f9e0077b3d7dd5d5e430",
      "account": "aaa271bca468fb8518f73a732a484b29a1bc296ebcb23f15639d4865a5cebe87",
      "rest_url": "http://localhost:8080",
      "faucet_url": "http://localhost:8081"
    }
  }
}
{
  "Result": {
    "ledger-wallet-1000": {
      "has_private_key": false,
      "public_key": "0x20ba83f9b9fdab73b0ace8fda26ce24c98cf55060b72b69cfbd25add6a25d09b",
      "account": "aaa271bca468fb8518f73a732a484b29a1bc296ebcb23f15639d4865a5cebe87",
      "rest_url": "http://localhost:8080",
      "faucet_url": "http://localhost:8081"
    }
  }
}
```
</details>

ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯ã‚‚ã¯ã‚„ãƒ›ãƒƒãƒˆç§˜å¯†éµã§ä¿è­·ã•ã‚Œã¦ã„ãªã„ãŸã‚ã€ç§˜å¯†éµã¨å…¬é–‹éµã®
ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã—ã¾ã™ã€‚

<Callout type="info" emoji="ğŸ§ ">
UNIXãƒ©ã‚¤ã‚¯ãªãƒã‚·ãƒ³ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆï¼š

```shell filename="Terminal"
rm private-key-a
rm private-key-b
rm private-key-a.pub
rm private-key-b.pub
```
</Callout>

ãƒ›ãƒƒãƒˆã‚¦ã‚©ãƒ¬ãƒƒãƒˆã®èªè¨¼ã‚­ãƒ¼ã®ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãŒå®Œäº†ã—ãŸã®ã§ã€ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚‚
å‰Šé™¤ã§ãã¾ã™ï¼š

```sh filename="Terminal"
aptos config delete-profile --profile hot-wallet-1
aptos config delete-profile --profile ledger-wallet-1000
```

<details>
<summary>å‡ºåŠ›ä¾‹</summary>
```sh filename="Terminal"
{
  "Result": "Deleted profile hot-wallet-1"
}
{
  "Result": "Deleted profile ledger-wallet-1000"
}
```
</details>

### ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’å¾©å…ƒã™ã‚‹

ãƒ›ãƒƒãƒˆã‚¦ã‚©ãƒ¬ãƒƒãƒˆã®èªè¨¼ã‚­ãƒ¼ã‚’Ledgerã«ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã—ãŸã“ã¨ãŒã‚ã‹ã£ã¦ãŠã‚Šã€
1000ã‹ã‚‰ã®[BIP44ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹]ã‚ªãƒ•ã‚»ãƒƒãƒˆã¨ã„ã†ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’
ä½¿ç”¨ã—ãŸãŸã‚ã€[BIP44ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹]ã ã‘ã§ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’ç°¡å˜ã«
å¾©å…ƒã§ãã¾ã™ï¼š

```sh filename="Terminal"
aptos init \
    --assume-yes \
    --derivation-index 1000 \
    --network local \
    --profile ledger-wallet-1000-recovered
```

<details>
<summary>å‡ºåŠ›ä¾‹</summary>
```sh filename="Terminal"
Configuring for profile ledger-wallet-1000-recovered
Configuring for network Local
Account 0xaaac71af5f2a4af4ec2639a15799bf9b945afb061c8bee102b636531c1b00eb5 has been already found onchain

---
Aptos CLI is now set up for account 0xaaac71af5f2a4af4ec2639a15799bf9b945afb061c8bee102b636531c1b00eb5 as profile ledger-wallet-1000-recovered!  Run `aptos --help` for more information about commands
{
  "Result": "Success"
}
```
</details>

ã“ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãŒæŒ‡å®šã—ãŸ`0xaaa...`ãƒãƒ‹ãƒ†ã‚£ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã«å¯¾å¿œã—ã¦ã„ã‚‹ã“ã¨ã‚’
ç¢ºèªã—ã¾ã™ï¼š

```sh filename="Terminal"
aptos config show-profiles --profile ledger-wallet-1000-recovered
```

<details>
<summary>å‡ºåŠ›ä¾‹</summary>
```sh filename="Terminal"
{
  "Result": {
    "ledger-wallet-1000-recovered": {
      "has_private_key": false,
      "public_key": "0x20ba83f9b9fdab73b0ace8fda26ce24c98cf55060b72b69cfbd25add6a25d09b",
      "account": "aaac71af5f2a4af4ec2639a15799bf9b945afb061c8bee102b636531c1b00eb5",
      "rest_url": "http://localhost:8080",
      "faucet_url": "http://localhost:8081"
    }
  }
}
```
</details>

<Callout type="info" emoji="ğŸ§ ">
`aptos init`ã‚³ãƒãƒ³ãƒ‰ã¯ã€å…¬é–‹éµã«é–¢é€£ä»˜ã‘ã‚‰ã‚ŒãŸã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æ±ºå®šã™ã‚‹éš›ã«
ã¾ãš[`account::OriginatingAddress`]ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ãŸã‚ã€
[ã‚­ãƒ¼ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰](../../guides/key-rotation.mdx)ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã«
å¾“ã„ã€ä¸€åº¦ã«1ã¤ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ã¿ã‚’ç§˜å¯†éµã§èªè¨¼ã™ã‚‹å ´åˆã€[BIP44ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹]
ã ã‘ã§ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’ç°¡å˜ã«å¾©å…ƒã§ãã¾ã™ã€‚
</Callout>

### æ–°ã—ã„ãƒ›ãƒƒãƒˆç§˜å¯†éµã«ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹

Ledgerãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚¦ã‚©ãƒ¬ãƒƒãƒˆã«ãƒªãƒ³ã‚¯ã•ã‚ŒãŸã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½¿ç”¨ã—ã¦å¤§ããªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’
å…¬é–‹ã—ãŸã„å ´åˆã€Ledgerã®ãƒ¡ãƒ¢ãƒªåˆ¶é™ã«ã‚ˆã‚Šç½²åã§ãã¾ã›ã‚“ã€‚ã“ã®å ´åˆã€ä¸€æ™‚çš„ã«
ãƒ›ãƒƒãƒˆã‚¦ã‚©ãƒ¬ãƒƒãƒˆã«ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã¾ãšã€æ–°ã—ã„ç§˜å¯†éµã‚’ç”Ÿæˆã—ã¾ã™ï¼š

```sh filename="Terminal"
aptos key generate \
    --assume-yes \
    --output-file private-key-b \
    --vanity-prefix 0xbbb
```

<details>
<summary>å‡ºåŠ›ä¾‹</summary>
```sh filename="Terminal"
{
  "Result": {
    "PublicKey Path": "private-key-b.pub",
    "PrivateKey Path": "private-key-b",
    "Account Address:": "0xbbbede2b4f1d49eff0b156ab0756889a6f2bb68f215399d5015da9ac45921b47"
  }
}
```
</details>

Ledgerã«ãƒªãƒ³ã‚¯ã•ã‚ŒãŸã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®èªè¨¼ã‚­ãƒ¼ã‚’æ–°ã—ã„ç§˜å¯†éµã«ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã—ã¾ã™ï¼š

```sh filename="Terminal"
aptos account rotate-key \
    --assume-yes \
    --new-private-key-file private-key-b \
    --profile ledger-wallet-1000-recovered \
    --save-to-profile temporary-hot-wallet
```

CLIãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®æŒ‡ç¤ºã«å¾“ã£ã¦ãã ã•ã„ï¼š

```sh filename="Terminal"
Approve rotation proof challenge signature on your Ledger device
```

```sh filename="Terminal"
Approve transaction on your Ledger device
```

<details>
<summary>å‡ºåŠ›ä¾‹</summary>
```sh filename="Terminal"
{
  "Result": {
    "message": "Saved new profile temporary-hot-wallet",
    "transaction": {
      "transaction_hash": "0xe49782e92d8fd824fd6dce8f6ed42a11cf8ee84c201f3aa639c435e737c80eaa",
      "gas_used": 449,
      "gas_unit_price": 100,
      "sender": "aaac71af5f2a4af4ec2639a15799bf9b945afb061c8bee102b636531c1b00eb5",
      "sequence_number": 1,
      "success": true,
      "timestamp_us": 1717986617911082,
      "version": 631,
      "vm_status": "Executed successfully"
    }
  }
}
```
</details>

CLIãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«`ledger-wallet-1000-recovered`ã¯å¤ããªã£ãŸãŸã‚ã€ç§˜å¯†éµãŒ
ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã•ã‚ŒãŸã“ã¨ã‚’å¿˜ã‚ŒãŸå ´åˆã«å‚™ãˆã¦åå‰ã‚’å¤‰æ›´ã—ã¾ã™ï¼š

```sh filename="Terminal"
aptos config rename-profile \
    --profile ledger-wallet-1000-recovered \
    --new-profile-name ledger-wallet-1000-stale
```

<details>
<summary>å‡ºåŠ›ä¾‹</summary>
```sh filename="Terminal"
{
  "Result": "Renamed profile ledger-wallet-1000-recovered to ledger-wallet-1000-stale"
}
```
</details>

### Ledgerã«æˆ»ã—ã¦ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹

ãƒ›ãƒƒãƒˆã‚­ãƒ¼ã§å¤§ããªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å…¬é–‹ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã«ç½²åã—ãŸã‚‰ã€èªè¨¼ã‚­ãƒ¼ã‚’
ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹1000ã®Ledgerã®ç§˜å¯†éµã«æˆ»ã—ã¦ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§ãã¾ã™ï¼š

```sh filename="Terminal"
aptos account rotate-key \
    --assume-yes \
    --new-derivation-index 1000 \
    --profile temporary-hot-wallet \
    --save-to-profile ledger-wallet-1000
```

CLIãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®æŒ‡ç¤ºã«å¾“ã£ã¦ãã ã•ã„ï¼š

```sh filename="Terminal"
Approve rotation proof challenge signature on your Ledger device
```

<details>
<summary>å‡ºåŠ›ä¾‹</summary>
```sh filename="Terminal"
{
  "Result": {
    "message": "Saved new profile ledger-wallet-1000",
    "transaction": {
      "transaction_hash": "0x9503819d4ea13bcd9eafed25984807d86d22e8a9837565a7495b54d13890d103",
      "gas_used": 449,
      "gas_unit_price": 100,
      "sender": "aaac71af5f2a4af4ec2639a15799bf9b945afb061c8bee102b636531c1b00eb5",
      "sequence_number": 2,
      "success": true,
      "timestamp_us": 1717986672963544,
      "version": 742,
      "vm_status": "Executed successfully"
    }
  }
}
```
</details>

`ledger-wallet-1000-stale`ã¨`ledger-wallet-1000`ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãŒåŒã˜`account`
ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨`public_key`ã‚’æŒã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ï¼š

```sh filename="Terminal"
aptos config show-profiles --profile ledger-wallet-1000-stale
aptos config show-profiles --profile ledger-wallet-1000
```

ã‚‚ã†å¿…è¦ãªã„`temporary-hot-wallet`ã¨`ledger-wallet-1000-stale`ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’
å‰Šé™¤ã—ã¾ã™ã€‚

```sh filename="Terminal"
aptos config delete-profile --profile temporary-hot-wallet
aptos config delete-profile --profile ledger-wallet-1000-stale
```

<details>
<summary>å‡ºåŠ›ä¾‹</summary>
```sh filename="Terminal"
{
  "Result": "Deleted profile temporary-hot-wallet"
}
{
  "Result": "Deleted profile ledger-wallet-1000-stale"
}
```
</details>

ä¸€æ™‚çš„ãªç§˜å¯†éµã‚‚ä¸è¦ã«ãªã£ãŸãŸã‚ã€å‰Šé™¤ã—ã¾ã™ã€‚

<Callout type="info" emoji="ğŸ§ ">
UNIXãƒ©ã‚¤ã‚¯ãªãƒã‚·ãƒ³ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆï¼š

```shell filename="Terminal"
rm private-key-*
```
</Callout>

### ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

æ®‹ã‚Šã®ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’å‰Šé™¤ã—ã¾ã™ï¼š

```shell filename="Terminal"
aptos config delete-profile --profile ledger-wallet-1000
```

ãã®å¾Œã€ãƒ­ãƒ¼ã‚«ãƒ«ãƒãƒƒãƒˆã‚’åœæ­¢ã—ã¾ã™ã€‚

<Callout type="info" emoji="ğŸ§ ">
UNIXãƒ©ã‚¤ã‚¯ãªãƒã‚·ãƒ³ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆï¼š

```shell filename="Terminal"
aptos config delete-profile --profile ledger-wallet-1000
kill $LOCALNET_PID
rm -fr localnet-data
```
</Callout>

</Steps>

[`account::OriginatingAddress`]: https://github.com/aptos-labs/aptos-core/blob/acb6c891cd42a63b3af96561a1aca164b800c7ee/aptos-move/framework/aptos-framework/sources/account.move#L70
[BIP44ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹]: https://github.com/bitcoin/bips/blob/master/bip-0044.mediawiki