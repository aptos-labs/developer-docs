# 名前付きアドレス

名前付きアドレスは、数値アドレスの代わりに識別子を使用できる機能です。これにより、アドレスが使用される任意の場所で、数値の代わりに意味のある名前を使用できます。

## 概要

名前付きアドレスは、以下の特徴を持ちます：

- ソース言語レベルでのみ存在し、バイトコードレベルでは完全に値に置き換えられます
- Moveパッケージのトップレベル要素として宣言されるか、コンパイラに引数として渡されます
- モジュールとモジュールメンバーへのアクセスには、名前付きアドレスを使用する必要があります

## 宣言と使用

名前付きアドレスは、`Move.toml`ファイルの`[addresses]`セクションで宣言します：

```toml
[addresses]
my_addr = "_"  # コンパイル時に値を指定
std = "0x1"    # 直接値を指定
```

Moveソースコードでは、以下のように使用できます：

```move
module my_addr::MyModule {
    use std::vector;
    
    public fun example(): address {
        @my_addr  // 式コンテキストでは@が必要
    }
}

module std::OtherModule {  // モジュール宣言では@は不要
    // ...
}
```

## コンパイル時の動作

名前付きアドレスは、以下の方法で値を指定できます：

1. `Move.toml`ファイルで直接値を指定
2. コマンドライン引数で値を指定（`--named-addresses`オプション）
3. 開発時のみの値を`[dev-addresses]`セクションで指定

例えば：

```bash
aptos move compile --named-addresses my_addr=0x42
```

## 重要な注意点

1. モジュールアクセスには名前付きアドレスを使用する必要があります
   - `my_addr::module`は`0x42::module`と同等ではありません
2. 名前付きアドレスの値は、パッケージグラフ全体で一貫している必要があります
3. すべての名前付きアドレスは、コンパイル前に値が解決される必要があります

## 開発時のアドレス

`[dev-addresses]`セクションを使用して、開発時のみの値を指定できます：

```toml
[addresses]
my_addr = "_"

[dev-addresses]
my_addr = "0xC0FFEE"  # 開発時のみ使用される値
```

このセクションは、開発やテスト時にのみ使用され、本番環境では無視されます。 