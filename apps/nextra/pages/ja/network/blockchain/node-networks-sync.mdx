---
title: "ノードネットワークと同期"
---

# ノードネットワークと同期

バリデータノードとフルノードは、バリデータノードをルートとし、フルノードをその他の場所に配置する階層構造を形成します。Aptosブロックチェーンは、2種類のフルノードを区別します：バリデータフルノードとパブリックフルノードです。バリデータフルノードはバリデータノードに直接接続し、DDoS対策とともにスケーラビリティを提供します。パブリックフルノードはバリデータフルノード（または他のパブリックフルノード）に接続して、Aptosネットワークへの低遅延アクセスを実現します。

![v-fn-network.svg](/docs/v-fn-network.svg)

## ノードの種類

Aptosは以下のノードタイプで動作します：

- [バリデータノード（VN）](validator-nodes.mdx) - コンセンサスに参加し、[トランザクション処理](txns-states.mdx)を駆動します。
- バリデータフルノード（VFN） - ブロックチェーンの状態を取得し最新の状態を維持します。バリデータオペレーターによって運営され、バリデータノードに直接接続できるため、パブリックフルノードからのリクエストに対応できます。それ以外はパブリックフルノードと同様に動作します。
- [パブリックフルノード（PFN）](fullnodes.mdx) - バリデータオペレーター以外が運営し、バリデータノードに直接接続できないため、同期のためにVFNに依存します。
- [アーカイバルノード（AN）](../nodes/configure/state-sync.mdx#archival-pfns) - ブロックチェーンの履歴開始以降のすべてのブロックチェーンデータを含むフルノードです。

## 独立したネットワークスタック

Aptosブロックチェーンは、様々なネットワークトポロジーに対して独立したネットワークスタックをサポートしています。例えば、バリデータネットワークはフルノードネットワークから独立しています。独立したネットワークスタックの利点は以下の通りです：

- 異なるネットワーク間のクリーンな分離
- セキュリティ設定のより良いサポート（双方向認証とサーバー認証など）
- 独立した発見プロトコルの許可（バリデータノードのパブリックエンドポイントのオンチェーン発見や、プライベート組織の手動設定など）

# ノードの同期

Aptosノードは、コンセンサスまたは状態同期の2つのメカニズムを通じてAptosブロックチェーンの最新の状態に同期します。バリデータノードはコンセンサスと状態同期の両方を使用して最新の状態を維持しますが、フルノードは状態同期のみを使用します。

例えば、バリデータノードは初めてオンラインになったときや再起動したとき（しばらくオフラインだった後など）に状態同期を呼び出します。バリデータがブロックチェーンの最新の状態に追いついたら、コンセンサスへの参加を開始し、最新の状態を維持するためにコンセンサスのみに依存します。一方、フルノードはブロックチェーンの成長に伴って最新の状態を取得・維持するために、継続的に状態同期に依存します。

2024年12月現在、Aptosネットワークのブロック時間は250ミリ秒未満です。

## 状態同期器

各Aptosノードには[状態同期器](../nodes/configure/state-sync.mdx)コンポーネントが含まれており、これを使用してノードの状態をピアと同期します。このコンポーネントはすべてのタイプのAptosノードで同じ機能を持ちます：専用のピアツーピアネットワークを利用して、ブロックチェーンデータを継続的にリクエストおよび配布します。バリデータノードはバリデータノードネットワーク内でブロックチェーンデータを配布し、フルノードは他のフルノード（バリデータノードまたはパブリックフルノード）に依存します。
