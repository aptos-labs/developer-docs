---
title: "PFNの要件"
---

import { Callout, Steps } from 'nextra/components';

# PFNの要件

パブリックフルノード（PFN）が円滑に動作することを確実にするために、このドキュメントで指定された要件を満たす必要があります。

## ハードウェア要件

<Callout type="warning">
**最小ハードウェア要件**<br />
最小ハードウェア要件を満たさない場合、PFNは負荷がかかると性能が低下し、本番環境で一般的な不安定性を経験することになります。最小ハードウェア要件を満たさずにPFNを実行することは推奨されません。
</Callout>

本番環境グレードのPFNを実行するには、バリデータやVFNと同じハードウェア要件を満たすことを推奨します。これらの要件については、こちらを参照してください：[バリデータとVFNのハードウェア要件](../validator-node/node-requirements.mdx#hardware-requirements)。

<Callout type="info">
**PFNのテスト**<br />
開発やテストのみを目的としてPFNを実行する場合は、より低いハードウェアスペックを使用できます。
ただし、本番環境では使用しないでください。
</Callout>

## ネットワーク要件とポート

PFNを実行する際は、他のノード（ピア）があなたに接続できるようにノード上でネットワークポートを開く必要があります。Aptosには異なるネットワークタイプがあり、各ネットワークタイプは異なるポートを使用します。ただし、PFNが使用するネットワークタイプはパブリックネットワークのみで、PFNは他のPFNやVFNに接続します。

PFNは、パブリックネットワークがノード上の特定のポートを使用するように設定できます。ノード設定YAMLファイルを使用してポート設定を構成できます。[設定ファイルの例](https://github.com/aptos-labs/aptos-core/blob/main/config/src/config/test_data/public_full_node.yaml#L16)では、パブリックネットワークがポート`6180`を使用するようにPFNを設定しています。

### ポート設定

以下の推奨事項は、PFNが使用するデフォルトのポート設定を前提としています。設定ファイルでデフォルトのポート設定を変更した場合は、それに応じて推奨事項を調整する必要があります。

<Callout type="warning"> 
**ポートの公開**<br />
明示的に必要な場合を除き、PFNの運用時に他のポートを公開しないことを推奨します。これは、追加のポートを公開することでノードの攻撃対象領域が増加し、攻撃者に対してより脆弱になる可能性があるためです。
</Callout>

#### PFNの実行：

デフォルトのポートを使用する場合、PFNには以下の設定が必要です：

- 以下のTCPポートを開く：
  - `6182` – **パブリックネットワーク**：他のPFNがあなたのPFNに接続できるように、このポートを公開します。
- 以下のTCPポートを閉じる：
  - `9101` – **検査サービス**：不正なメトリクス検査を防ぐため、このポートを閉じます。
  - `9102` – **管理サービス**：不正な管理サービスの操作を防ぐため、このポートを閉じます。
  - `80/8080` - **REST API**：不正なREST APIアクセスを防ぐため、このポートを閉じます。

<Callout type="warning"> 
**サービスの公開**<br />
検査サービスポート（`9101`）、管理サービスポート（`9102`）、およびREST APIポート（`80`または`8080`）は、アプリケーション開発やデバッグなど、内部ネットワークで有用です。ただし、検査サービスポートと管理サービスポートは簡単に悪用される可能性があるため、決して公開してはいけません。同様に、REST APIエンドポイントを公開する場合は、悪用を防ぐために追加の認証やレート制限メカニズムを導入する必要があります。
</Callout>

## ストレージ要件

Aptos PFNが保存するデータ量は、ブロックチェーンの台帳履歴（長さ）とオンチェーン状態（アカウントやリソースなど）の数に依存します。台帳履歴とオンチェーン状態の数は、ブロックチェーンの年齢、時間経過に伴う平均トランザクションレート、台帳データベースプルーナーの設定など、いくつかの追加要因に依存します。執筆時点では、testnetとmainnetのPFNには数百GBのストレージが必要と推定されています。

アーカイバルノードはブロックチェーンの全履歴を保存するため、アーカイバルノードのデータベースサイズは無制限に増加し続けることに注意してください。そのため、アーカイバルノードのストレージサイズに関する推奨事項は提供できません。

<Callout type="info"> 
**Devnetブロックチェーンのストレージ**<br />
Aptos devnetは現在、週単位でリセットされています。devnet PFNをデプロイする場合、これはストレージが毎週リセット（つまり消去）されることを意味します。[Aptos Discord](https://discord.gg/aptosnetwork)の`#devnet-release`チャンネルを参照してください。
</Callout>
