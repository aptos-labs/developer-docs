---
title: "è¿ç§»æŒ‡å—"
---

import { Callout } from 'nextra/components';

<Callout emoji="ğŸš¨" type="error">
  æ—§ç‰ˆ TypeScript SDK åŒ… `aptos` å·²å¼ƒç”¨ï¼Œå°†è¢«æ–°ç‰ˆ TypeScript SDK å–ä»£ã€‚è¯·å‚è€ƒ [æ–°ç‰ˆ TypeScript SDK](../../ts-sdk.mdx) è·å–æœ€æ–°åŠŸèƒ½å’Œæ›´æ–°ã€‚
</Callout>

# TypeScript SDK è¿ç§»æŒ‡å—

å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨ `aptos` çš„æ—©æœŸç‰ˆæœ¬ `1.x.x`ï¼Œæ‚¨éœ€è¦è¿›è¡Œä»¥ä¸‹æ›´æ–°ã€‚

<Callout type="info">
æœ¬æŒ‡å—ä»…åŒ…å« API å·®å¼‚å’Œå¼ƒç”¨åŠŸèƒ½æ‰€éœ€çš„æ›´æ–°ï¼Œä¸åŒ…å« v2 SDK çš„æ–°åŠŸèƒ½ã€‚
</Callout>

## å®‰è£… SDK

TypeScript SDK V2 å·²è¿ç§»è‡³æ–°çš„ [GitHub ä»“åº“](https://github.com/aptos-labs/aptos-ts-sdk)ï¼Œå¹¶ä½¿ç”¨æ–°çš„åŒ…å - `@aptos-labs/ts-sdk`

```bash npm2yarn
npm i @aptos-labs/ts-sdk
```

## SDK ä½¿ç”¨ä¸æŸ¥è¯¢ Aptos é“¾

ç§»é™¤æ‰€æœ‰ `<*>Client` æ¨¡å—ï¼ˆå¦‚ `AptosClient`ã€`FaucetClient`ã€`CoinClient` ç­‰ï¼‰ï¼Œæ›¿æ¢ä¸º `Aptos` å…¥å£ç±»

**V1**

```ts filename="v1.ts"
const faucetClient = new FaucetClient(NODE_URL, FAUCET_URL);
const aptosClient = new AptosClient(NODE_URL);
const indexerClient = new IndexerClient(INDEXER_URL);
const tokenClient = new TokenClient(aptosClient);
```

**V2**
<Callout type="info">
äº†è§£æ›´å¤šä¿¡æ¯è¯·[ç‚¹å‡»è¿™é‡Œ](../../ts-sdk.mdx)ã€‚
</Callout>

```ts filename="v2.ts"
const aptos = new Aptos();

// æ‰§è¡ŒæŸ¥è¯¢
const fund = await aptos.fundAccount({ accountAddress: "0x123", amount: 100 });
const modules = await aptos.getAccountModules({ accountAddress: "0x123" });
const tokens = await aptos.getAccountOwnedTokens({ accountAddress: "0x123" });
```

## é…ç½®ç±»

è¦é…ç½®æ‚¨çš„ `Aptos` å®¢æˆ·ç«¯ï¼Œå¯ä»¥ä½¿ç”¨ `AptosConfig` å¯¹è±¡ã€‚

```ts filename="v2.ts"
const aptosConfig = new AptosConfig({ network: Network.DEVNET }); // é»˜è®¤ä¸º devnet
const aptos = new Aptos(config);
```

## äº¤æ˜“æ„å»ºæµç¨‹

ç§»é™¤äº†æ‰€æœ‰ç‹¬ç«‹çš„äº¤æ˜“å‡½æ•°ï¼Œé‡‡ç”¨æ›´ç®€åŒ–çš„äº¤æ˜“æ„å»ºæµç¨‹

**V1**

```ts filename="v1.ts"
const aptosClient = new AptosClient(NODE_URL);

// bcs åºåˆ—åŒ–å‚æ•°è´Ÿè½½
const entryFunctionPayload =
  new TxnBuilderTypes.TransactionPayloadEntryFunction(
    TxnBuilderTypes.EntryFunction.natural(
      "0x1::aptos_account",
      "transfer",
      [],
      [bcsToBytes(TxnBuilderTypes.AccountAddress.fromHex(receiver.address()))],
    ),
  );
// ç”ŸæˆåŸå§‹äº¤æ˜“
const transaction = await client.generateRawTransaction(
  sender.address(),
  entryFunctionPayload,
);

// éåºåˆ—åŒ–å‚æ•°è´Ÿè½½
const payload: Gen.TransactionPayload = {
  type: "entry_function_payload",
  function: "0x1::aptos_account::transfer",
  type_arguments: [],
  arguments: [account2.address().hex(), 100000],
};
// ç”ŸæˆåŸå§‹äº¤æ˜“
const transaction = await client.generateTransaction(
  account1.address(),
  payload,
);

// ç­¾åäº¤æ˜“
const signedTransaction = AptosClient.generateBCSTransaction(
  sender,
  transaction,
);
// æäº¤äº¤æ˜“
const txn = await client.submitSignedBCSTransaction(signedTransaction);
```

**V2**
<Callout type="info">
äº†è§£æ›´å¤šä¿¡æ¯è¯·æŸ¥çœ‹[è¿™é‡Œ](../building-transactions.mdx)ã€‚
</Callout>

```ts filename="v2.ts"
const aptos = new Aptos();

// éåºåˆ—åŒ–å‚æ•°çš„äº¤æ˜“
const transaction = await aptos.build.transaction({
  sender: alice.accountAddress,
  data: {
    function: "0x1::coin::transfer",
    typeArguments: ["0x1::aptos_coin::AptosCoin"],
    functionArguments: [bobAddress, 100],
  },
});

// bcsåºåˆ—åŒ–å‚æ•°çš„äº¤æ˜“
const transaction = await aptos.build.transaction({
  sender: alice.accountAddress,
  data: {
    function: "0x1::coin::transfer",
    typeArguments: [parseTypeTag("0x1::aptos_coin::AptosCoin")],
    functionArguments: [bobAddress, new U64(100)],
  },
});
// ç­¾åäº¤æ˜“
const senderAuthenticator = aptos.sign.transaction({
  signer: alice,
  transaction,
});
// æäº¤äº¤æ˜“
const committedTransaction = await aptos.submit.transaction({
  transaction,
  senderAuthenticator,
});
```

## è´¦æˆ·

å°† `AptosAccount` é‡å‘½åä¸º `Account` å¹¶ä½¿ç”¨é™æ€æ–¹æ³•æ¥ç”Ÿæˆ/æ´¾ç”Ÿè´¦æˆ·

**V1**

```ts filename="v1.ts"
// ç”Ÿæˆæ–°è´¦æˆ·ï¼ˆæˆ–å¯†é’¥å¯¹ï¼‰æˆ–ä»ç§é’¥æ´¾ç”Ÿæˆ–ä»ç§é’¥å’Œåœ°å€æ´¾ç”Ÿ
const account = new AptosAccount(); // ä»…æ”¯æŒ Legacy Ed25519

// ä»æ´¾ç”Ÿè·¯å¾„æ´¾ç”Ÿè´¦æˆ·
const account = AptosAccount.fromDerivePath(..)
```

**V2**
<Callout type="info">
äº†è§£æ›´å¤šä¿¡æ¯è¯·æŸ¥çœ‹[è¿™é‡Œ](../account.mdx)ã€‚
</Callout>

```ts filename="v2.ts"
// ç”Ÿæˆæ–°è´¦æˆ·ï¼ˆæˆ–å¯†é’¥å¯¹ï¼‰
const account = Account.generate(); // é»˜è®¤ä½¿ç”¨ Legacy Ed25519
const account = Account.generate({ scheme: SigningSchemeInput.Secp256k1Ecdsa }); // å•ä¸€å‘é€è€… Secp256k1
const account = Account.generate({
  scheme: SigningSchemeInput.Ed25519,
  legacy: false,
}); // å•ä¸€å‘é€è€… Ed25519

// ä»ç§é’¥æ´¾ç”Ÿè´¦æˆ·
const account = Account.fromPrivateKey({ privateKey });

// ä»ç§é’¥å’Œåœ°å€æ´¾ç”Ÿè´¦æˆ·
const account = Account.fromPrivateKeyAndAddress({
  privateKey,
  address: accountAddress,
});

// ä»æ´¾ç”Ÿè·¯å¾„æ¨å¯¼è´¦æˆ·
const account = Account.fromDerivationPath({
  path,
  mnemonic,
  scheme: SigningSchemeInput.Ed25519,
});
```